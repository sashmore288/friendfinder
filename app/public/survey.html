<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<title>FriendFinder</title>
	<!-- Latest compiled and minified CSS & JS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>

</head>
<body>

  

     
	
	<div class="container">
		<div class="jumbotron">
			<h1>Roc Nation Friend Finder</h1>
			 <h3>  Who are you most compatible with!</h3>
			<hr>
			
		</div>
		<h3> Question 1</h3>
		<h4>Elevators make you uncomfortable.</h4>	
   <!-- <div class="btn-group">
    <button type="button" class="btn btn-primary">Option</button>
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    <span class="caret"></span>
    <span class="sr-only">Toggle Dropdown</span>
    </button> -->
    <select data-placeholder="" class="chosen-select" id="q3">
      <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

   <!-- <ul class="dropdown-menu">
      <select>
      <option value=""></option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)
      </option></select>
    </ul>
  </div> -->
      
    	<h3> Question 2</h3>
		<h4>You learn from your mistakes.</h4>
    <!--<div class="btn-group">
    <button type="button" class="btn btn-primary">Option</button>
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    <span class="caret"></span>
    <span class="sr-only">Toggle Dropdown</span>
    </button>-->
    <select data-placeholder="" class="chosen-select" id="q3">
      <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
    </ul>
  </div>
		
    	<h3> Question 3</h3>
		<h4>You prefer to keep your personal life private.</h4>
		<!--<div class="btn-group">
    <button type="button" class="btn btn-primary">Option</button>
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    <span class="caret"></span>
    <span class="sr-only">Toggle Dropdown</span>
    </button>-->
    <select data-placeholder="" class="chosen-select" id="q3">
      <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
    </ul>
  </div>
    	<h3> Question 4</h3>
		<h4>Christmas is your favorite Holiday.</h4>
		<!--<div class="btn-group">
    <button type="button" class="btn btn-primary">Option</button>
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    <span class="caret"></span>
    <span class="sr-only">Toggle Dropdown</span>
    </button>-->
    <select data-placeholder="" class="chosen-select" id="q3">
      <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
      </option>
    </ul>
  </div>
    	<h3> Question 5</h3>
		<h4>Snapchat is life!.</h4>
		<!--<div class="btn-group">
    <button type="button" class="btn btn-primary">Option</button>
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    <span class="caret"></span>
    <span class="sr-only">Toggle Dropdown</span>
    </button>-->
    <select data-placeholder="" class="chosen-select" id="q3">
      <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
    </ul>
  </div>

  <h3> Question 6</h3>
    <h4>The South birthed you.</h4>
    <!--<div class="btn-group">
    <button type="button" class="btn btn-primary">Option</button>
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    <span class="caret"></span>
    <span class="sr-only">Toggle Dropdown</span>
    </button>-->
    <select data-placeholder="" class="chosen-select" id="q3">
      <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
    </ul>
  </div>

  <h3> Question 7</h3>
    <h4>You love kids</h4>
    <!--<div class="btn-group">
    <button type="button" class="btn btn-primary">Option</button>
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    <span class="caret"></span>
    <span class="sr-only">Toggle Dropdown</span>
    </button>-->
    <select data-placeholder="" class="chosen-select" id="q3">
      <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
    </ul>
  </div>

  <h3> Question 8</h3>
    <h4>All attention is welcome, good or bad.</h4>
    <!--<div class="btn-group">
    <button type="button" class="btn btn-primary">Option</button>
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    <span class="caret"></span>
    <span class="sr-only">Toggle Dropdown</span>
    </button>-->
    <select data-placeholder="" class="chosen-select" id="q3">
      <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
    </ul>
  </div>

		<br>
    <br>


    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                            <div class="modal-dialog" role="document">
                              <div class="modal-content">
                                <div class="modal-header">
                                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                  <h4 class="modal-title" id="myModalLabel">Modal title</h4>
                                </div>
                                <div class="modal-body">
                                  <h1 id="matchName">Name Here</h1>
                                  <img id="matchFace" src=" " class="modal-img" alt="friend image">
                                </div>
                                <div class="modal-footer">
                                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                </div>
                              </div>
                            </div>
                          </div>

                        <div class="text-center">
                          <button type="submit" class="btn btn-info btn-lg" id="submit-button">Submit</button>
                        </div>

                      </form>

                      <br>

                  </div>
                </div>
            </div>
        </div>

<div class="text-center">
          <a id="friends-list-link" href="../api/friends">API Friends List</a> &bull;
          
        </div>

    </div>

    <script type="text/javascript">
      $("#submit-button").on("click", function(event) {
          event.preventDefault();
          
          var newFriend = {
              name: $("#name").val(),
              photo: $("#photo").val(),
              q1: $("#q1").val(),
              q2: $("#q2").val(),
              q3: $("#q3").val(),
              q4: $("#q4").val(),
              q5: $("#q5").val(),
              q6: $("#q6").val(),
              q7: $("#q7").val(),
              q8: $("#q8").val(),
              q9: $("#q9").val(),
              q10: $("#q10").val()
          };
          
          for (val in newFriend) {
            if ( isInteger(val)) {
              console.log('working')
              alert('please make sure that all items are filled in!')
            }
            else{
              
              $.get("/api/friends", function(req, res) {
              friendList = req;
              
                  
                  compareMatches(newFriend);
              });
              $('#myModal').modal('show');
              $.post("/api/friends", newFriend, function(data) {
              return data;
              });
            }
          }
        
          
        });
        function displayMatch(m) {
            var matched = friendList[m];
            $("#myModalLabel").text("Your new BFF is:");
            $("#matchName").text(matched.name);
            $("#matchFace").attr("src", matched.photo);
          }
          
          function compareMatches(n){
            var counterArray = [];
            for(i=0; i < friendList.length; i++){
              var oldFriendObject = friendList[i];
              var newFriendObject = n;
              var counter = 0;
              if(oldFriendObject.q1 === newFriendObject.q1){
                counter++;
              }
              if(oldFriendObject.q2 === newFriendObject.q2){
                counter++;
              }
              if(oldFriendObject.q3 === newFriendObject.q3){
                counter++;
              }
              if(oldFriendObject.q4 === newFriendObject.q4){
                counter++;
              }
              if(oldFriendObject.q5 === newFriendObject.q5){
                counter++;
              }
              if(oldFriendObject.q6 === newFriendObject.q6){
                counter++;
              }
              if(oldFriendObject.q7 === newFriendObject.q7){
                counter++;
              }
              if(oldFriendObject.q8 === newFriendObject.q8){
                counter++;
              }
              if(oldFriendObject.q9 === newFriendObject.q9){
                counter++;
              }
              if(oldFriendObject.q10 === newFriendObject.q10){
                counter++;
              }
              counterArray.push(counter);
            
          }
          
          
          var matchIndex = counterArray.indexOf(Math.max(...counterArray));
         
          displayMatch(matchIndex);
        };
    </script>

</body>
</html>
